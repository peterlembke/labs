<!DOCTYPE HTML>
<html>
<head>
    <style>
        #div1, #div2, #div3, #div4 {
            width: 350px;
            height: 70px;
            padding: 10px;
            border: 1px solid #aaaaaa;
        }
    </style>
    <script>

        let $draggedId = '';

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function dragStart(ev) {
            $draggedId = ev.target.id;
        }

        function dragEnter(ev) {
            ev.preventDefault();

            const $enteredElement = ev.target;
            $enteredElement.style.border = "3px dotted red";

            if ($enteredElement.id === $draggedId) {
                return;
            }

            const $draggedElement = document.getElementById($draggedId);

            if ($enteredElement.nextElementSibling) {
                const $nextElementSiblingId = $enteredElement.nextElementSibling.id ?? '';
                const $up = $draggedId === $nextElementSiblingId;
                if ($up === true) {
                    $enteredElement.parentNode.insertBefore($draggedElement, $enteredElement);
                    return;
                }
            }

            if ($enteredElement.previousElementSibling) {
                const $previousElementSiblingId = $enteredElement.previousElementSibling.id ?? '';
                const $down = $draggedId === $previousElementSiblingId;
                if ($down === true) {
                    $enteredElement.parentNode.insertBefore($enteredElement, $draggedElement);
                    return;
                }
            }
        }

        function dragLeave(ev) {
            ev.target.style.border = "";
        }

        function drop(ev) {
            ev.preventDefault();
            ev.target.style.border = "";
        }
    </script>
</head>
<body>

<p>Move around the boxes with touch or mouse</p>

<div id="div1" draggable="true" ondragstart="dragStart(event)" ondragenter="dragEnter(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event)">Div 1</div>
<div id="div2" draggable="true" ondragstart="dragStart(event)" ondragenter="dragEnter(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event)">Div 2</div>
<div id="div3" draggable="true" ondragstart="dragStart(event)" ondragenter="dragEnter(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event)">Div 3</div>
<div id="div4" draggable="true" ondragstart="dragStart(event)" ondragenter="dragEnter(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" ondrop="drop(event)">Div 4</div>

</body>
</html>
